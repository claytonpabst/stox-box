import {
  formatCurrentDayStocksForGraph,
  formatMultiDayStocksForGraph,
} from './apiUtil';

const rawDay = [
  {
    symbol: 'FB',
    data: [
      {
        date: '20190404',
        minute: '09:30',
        label: '09:30 AM',
        high: 176.7,
        low: 176,
        average: 176.324,
        volume: 7360,
        notional: 1297743.73,
        numberOfTrades: 67,
        marketHigh: 176.74,
        marketLow: 176,
        marketAverage: 176.154,
        marketVolume: 490534,
        marketNotional: 86409494.3342,
        marketNumberOfTrades: 1396,
        open: 176.11,
        close: 176.47,
        marketOpen: 176.02,
        marketClose: 176.44,
        changeOverTime: 0,
        marketChangeOverTime: 0,
      },
      {
        date: '20190404',
        minute: '10:00',
        label: '10 AM',
        high: 177.51,
        low: 177.41,
        average: 177.436,
        volume: 762,
        notional: 135206.16,
        numberOfTrades: 8,
        marketHigh: 177.57,
        marketLow: 177.385,
        marketAverage: 177.446,
        marketVolume: 36814,
        marketNotional: 6532512.9446,
        marketNumberOfTrades: 195,
        open: 177.42,
        close: 177.51,
        marketOpen: 177.387,
        marketClose: 177.502,
        changeOverTime: 0.0063065719924683804,
        marketChangeOverTime: 0.007334491410924541,
      },
      {
        date: '20190404',
        minute: '10:30',
        label: '10:30 AM',
        high: 176.55,
        low: 176.38,
        average: 176.437,
        volume: 1217,
        notional: 214723.975,
        numberOfTrades: 12,
        marketHigh: 176.61,
        marketLow: 176.375,
        marketAverage: 176.492,
        marketVolume: 70892,
        marketNotional: 12511842.3628,
        marketNumberOfTrades: 421,
        open: 176.55,
        close: 176.41,
        marketOpen: 176.55,
        marketClose: 176.4,
        changeOverTime: 0.0006408656790907622,
        marketChangeOverTime: 0.0019187756167898195,
      },
      {
        date: '20190404',
        minute: '11:00',
        label: '11 AM',
        high: 177.72,
        low: 177.45,
        average: 177.61,
        volume: 2632,
        notional: 467469.86,
        numberOfTrades: 22,
        marketHigh: 177.723,
        marketLow: 177.43,
        marketAverage: 177.58,
        marketVolume: 55352,
        marketNotional: 9829424.1563,
        marketNumberOfTrades: 310,
        open: 177.66,
        close: 177.46,
        marketOpen: 177.69,
        marketClose: 177.455,
        changeOverTime: 0.007293391710714374,
        marketChangeOverTime: 0.008095189436515868,
      },
      {
        date: '20190404',
        minute: '11:30',
        label: '11:30 AM',
        high: 177.29,
        low: 177.1,
        average: 177.217,
        volume: 410,
        notional: 72659,
        numberOfTrades: 5,
        marketHigh: 177.294,
        marketLow: 177.1,
        marketAverage: 177.184,
        marketVolume: 28280,
        marketNotional: 5010765.0988,
        marketNumberOfTrades: 154,
        open: 177.24,
        close: 177.1,
        marketOpen: 177.276,
        marketClose: 177.12,
        changeOverTime: 0.005064540278124366,
        marketChangeOverTime: 0.005847156465365539,
      },
      {
        date: '20190404',
        minute: '12:00',
        label: '12 PM',
        high: 177.015,
        low: 176.92,
        average: 176.939,
        volume: 1052,
        notional: 186139.885,
        numberOfTrades: 16,
        marketHigh: 177.015,
        marketLow: 176.87,
        marketAverage: 176.929,
        marketVolume: 40683,
        marketNotional: 7198011.782,
        marketNumberOfTrades: 200,
        open: 176.95,
        close: 177.01,
        marketOpen: 176.98,
        marketClose: 177,
        changeOverTime: 0.0034878972800071496,
        marketChangeOverTime: 0.004399559476367302,
      },
      {
        date: '20190404',
        minute: '12:30',
        label: '12:30 PM',
        high: -1,
        low: -1,
        average: -1,
        volume: 0,
        notional: 0,
        numberOfTrades: 0,
        marketHigh: 176.98,
        marketLow: 176.86,
        marketAverage: 176.915,
        marketVolume: 13003,
        marketNotional: 2300431.595,
        marketNumberOfTrades: 64,
        open: null,
        close: null,
        marketOpen: 176.97,
        marketClose: 176.89,
        changeOverTime: null,
        marketChangeOverTime: 0.004320083563245772,
      },
      {
        date: '20190404',
        minute: '13:00',
        label: '1 PM',
        high: 176.14,
        low: 176.13,
        average: 176.137,
        volume: 300,
        notional: 52841,
        numberOfTrades: 3,
        marketHigh: 176.17,
        marketLow: 176.1,
        marketAverage: 176.13,
        marketVolume: 8095,
        marketNotional: 1425776.0861,
        marketNumberOfTrades: 59,
        open: 176.14,
        close: 176.13,
        marketOpen: 176.125,
        marketClose: 176.11,
        changeOverTime: -0.0010605476282299167,
        marketChangeOverTime: -0.00013624442249395932,
      },
      {
        date: '20190404',
        minute: '13:30',
        label: '1:30 PM',
        high: 176.26,
        low: 176.25,
        average: 176.255,
        volume: 200,
        notional: 35251,
        numberOfTrades: 2,
        marketHigh: 176.327,
        marketLow: 176.21,
        marketAverage: 176.251,
        marketVolume: 8626,
        marketNotional: 1520340.72,
        marketNumberOfTrades: 68,
        open: 176.25,
        close: 176.26,
        marketOpen: 176.25,
        marketClose: 176.327,
        changeOverTime: -0.0003913250606838367,
        marketChangeOverTime: 0.0005506545409131125,
      },
      {
        date: '20190404',
        minute: '14:00',
        label: '2 PM',
        high: -1,
        low: -1,
        average: -1,
        volume: 0,
        notional: 0,
        numberOfTrades: 0,
        marketHigh: 176.31,
        marketLow: 176.13,
        marketAverage: 176.222,
        marketVolume: 9264,
        marketNotional: 1632524.4927,
        marketNumberOfTrades: 56,
        open: null,
        close: null,
        marketOpen: 176.308,
        marketClose: 176.16,
        changeOverTime: null,
        marketChangeOverTime: 0.00038602586373293854,
      },
      {
        date: '20190404',
        minute: '14:30',
        label: '2:30 PM',
        high: 176.18,
        low: 176.16,
        average: 176.173,
        volume: 300,
        notional: 52852,
        numberOfTrades: 3,
        marketHigh: 176.19,
        marketLow: 176.08,
        marketAverage: 176.153,
        marketVolume: 11114,
        marketNotional: 1957764.306,
        marketNumberOfTrades: 59,
        open: 176.18,
        close: 176.18,
        marketOpen: 176.18,
        marketClose: 176.11,
        changeOverTime: -0.0008563780313514351,
        marketChangeOverTime: -0.000005676850937275196,
      },
      {
        date: '20190404',
        minute: '15:00',
        label: '3 PM',
        high: 176.34,
        low: 176.32,
        average: 176.327,
        volume: 300,
        notional: 52898,
        numberOfTrades: 3,
        marketHigh: 176.38,
        marketLow: 176.31,
        marketAverage: 176.343,
        marketVolume: 7919,
        marketNotional: 1396456.66,
        marketNumberOfTrades: 68,
        open: 176.34,
        close: 176.32,
        marketOpen: 176.37,
        marketClose: 176.34,
        changeOverTime: 0.00001701413307312619,
        marketChangeOverTime: 0.001072924827139849,
      },
      {
        date: '20190404',
        minute: '15:30',
        label: '3:30 PM',
        high: 175.825,
        low: 175.78,
        average: 175.783,
        volume: 1088,
        notional: 191252.425,
        numberOfTrades: 10,
        marketHigh: 175.84,
        marketLow: 175.69,
        marketAverage: 175.758,
        marketVolume: 30975,
        marketNotional: 5444102.8038,
        marketNumberOfTrades: 172,
        open: 175.8,
        close: 175.78,
        marketOpen: 175.72,
        marketClose: 175.78,
        changeOverTime: -0.0030682153308683176,
        marketChangeOverTime: -0.0022480329711501673,
      },
    ],
  },
];

const formattedDay = [
  { name: '09:30 AM', FB: 176.154 },
  { name: '10 AM', FB: 177.446 },
  { name: '10:30 AM', FB: 176.492 },
  { name: '11 AM', FB: 177.58 },
  { name: '11:30 AM', FB: 177.184 },
  { name: '12 PM', FB: 176.929 },
  { name: '12:30 PM', FB: 176.915 },
  { name: '1 PM', FB: 176.13 },
  { name: '1:30 PM', FB: 176.251 },
  { name: '2 PM', FB: 176.222 },
];

const rawMulti = [
  {
    symbol: 'FB',
    data: [
      {
        date: '2019-03-04',
        open: 163.9,
        high: 167.5,
        low: 163.83,
        close: 167.37,
        volume: 18894689,
        unadjustedVolume: 18894689,
        change: 5.09,
        changePercent: 3.137,
        vwap: 165.8876,
        label: 'Mar 4',
        changeOverTime: 0,
      },
      {
        date: '2019-03-05',
        open: 167.37,
        high: 171.88,
        low: 166.55,
        close: 171.26,
        volume: 28187890,
        unadjustedVolume: 28187890,
        change: 3.89,
        changePercent: 2.324,
        vwap: 169.9877,
        label: 'Mar 5',
        changeOverTime: 0.023241919101392044,
      },
      {
        date: '2019-03-06',
        open: 172.9,
        high: 173.57,
        low: 171.27,
        close: 172.51,
        volume: 21531723,
        unadjustedVolume: 21531723,
        change: 1.25,
        changePercent: 0.73,
        vwap: 172.3393,
        label: 'Mar 6',
        changeOverTime: 0.030710402103124732,
      },
      {
        date: '2019-03-07',
        open: 171.5,
        high: 171.74,
        low: 167.61,
        close: 169.13,
        volume: 18306504,
        unadjustedVolume: 18306504,
        change: -3.38,
        changePercent: -1.959,
        vwap: 169.465,
        label: 'Mar 7',
        changeOverTime: 0.01051562406643957,
      },
      {
        date: '2019-03-08',
        open: 166.2,
        high: 169.62,
        low: 165.97,
        close: 169.6,
        volume: 13184831,
        unadjustedVolume: 13184831,
        change: 0.47,
        changePercent: 0.278,
        vwap: 168.2385,
        label: 'Mar 8',
        changeOverTime: 0.013323773675091055,
      },
      {
        date: '2019-03-11',
        open: 171.6,
        high: 174.3,
        low: 171.58,
        close: 172.07,
        volume: 18883983,
        unadjustedVolume: 18883983,
        change: 2.47,
        changePercent: 1.456,
        vwap: 172.8921,
        label: 'Mar 11',
        changeOverTime: 0.028081496086514838,
      },
      {
        date: '2019-03-12',
        open: 172.09,
        high: 173.8,
        low: 171.2178,
        close: 171.92,
        volume: 12155264,
        unadjustedVolume: 12155264,
        change: -0.15,
        changePercent: -0.087,
        vwap: 172.161,
        label: 'Mar 12',
        changeOverTime: 0.027185278126306882,
      },
      {
        date: '2019-03-13',
        open: 172.32,
        high: 174.03,
        low: 172.12,
        close: 173.37,
        volume: 11973280,
        unadjustedVolume: 11973280,
        change: 1.45,
        changePercent: 0.843,
        vwap: 173.2606,
        label: 'Mar 13',
        changeOverTime: 0.0358487184083169,
      },
      {
        date: '2019-03-14',
        open: 169.76,
        high: 171.15,
        low: 168.16,
        close: 170.17,
        volume: 18037364,
        unadjustedVolume: 18037364,
        change: -3.2,
        changePercent: -1.846,
        vwap: 169.9275,
        label: 'Mar 14',
        changeOverTime: 0.01672940192388112,
      },
      {
        date: '2019-03-15',
        open: 167.16,
        high: 167.58,
        low: 162.51,
        close: 165.98,
        volume: 37126000,
        unadjustedVolume: 37126000,
        change: -4.19,
        changePercent: -2.462,
        vwap: 165.5686,
        label: 'Mar 15',
        changeOverTime: -0.008304953097926837,
      },
      {
        date: '2019-03-18',
        open: 163.57,
        high: 163.9,
        low: 159.28,
        close: 160.47,
        volume: 37524191,
        unadjustedVolume: 37524191,
        change: -5.51,
        changePercent: -3.32,
        vwap: 161.0256,
        label: 'Mar 18',
        changeOverTime: -0.04122602616956447,
      },
      {
        date: '2019-03-19',
        open: 161.48,
        high: 163.82,
        low: 160.82,
        close: 161.57,
        volume: 25611488,
        unadjustedVolume: 25611488,
        change: 1.1,
        changePercent: 0.685,
        vwap: 162.2702,
        label: 'Mar 19',
        changeOverTime: -0.03465376112803974,
      },
      {
        date: '2019-03-20',
        open: 161.5,
        high: 166.12,
        low: 161.24,
        close: 165.44,
        volume: 20211474,
        unadjustedVolume: 20211474,
        change: 3.87,
        changePercent: 2.395,
        vwap: 164.032,
        label: 'Mar 20',
        changeOverTime: -0.011531337754675311,
      },
      {
        date: '2019-03-21',
        open: 164.89,
        high: 166.39,
        low: 163.75,
        close: 166.08,
        volume: 16223007,
        unadjustedVolume: 16223007,
        change: 0.64,
        changePercent: 0.387,
        vwap: 165.1371,
        label: 'Mar 21',
        changeOverTime: -0.007707474457788087,
      },
      {
        date: '2019-03-22',
        open: 165.65,
        high: 167.42,
        low: 164.09,
        close: 164.34,
        volume: 16389185,
        unadjustedVolume: 16389185,
        change: -1.74,
        changePercent: -1.048,
        vwap: 165.3463,
        label: 'Mar 22',
        changeOverTime: -0.018103602796200043,
      },
      {
        date: '2019-03-25',
        open: 163,
        high: 166.54,
        low: 162,
        close: 166.29,
        volume: 12631230,
        unadjustedVolume: 12631230,
        change: 1.95,
        changePercent: 1.187,
        vwap: 164.6721,
        label: 'Mar 25',
        changeOverTime: -0.006452769313497117,
      },
      {
        date: '2019-03-26',
        open: 167.35,
        high: 169.45,
        low: 166.3499,
        close: 167.68,
        volume: 15437920,
        unadjustedVolume: 15437920,
        change: 1.39,
        changePercent: 0.836,
        vwap: 167.9389,
        label: 'Mar 26',
        changeOverTime: 0.0018521837844297203,
      },
      {
        date: '2019-03-27',
        open: 167.85,
        high: 168.94,
        low: 164.79,
        close: 165.87,
        volume: 10620299,
        unadjustedVolume: 10620299,
        change: -1.81,
        changePercent: -1.079,
        vwap: 166.4655,
        label: 'Mar 27',
        changeOverTime: -0.008962179602079226,
      },
      {
        date: '2019-03-28',
        open: 164.57,
        high: 166.72,
        low: 163.33,
        close: 165.55,
        volume: 10689171,
        unadjustedVolume: 10689171,
        change: -0.32,
        changePercent: -0.193,
        vwap: 165.4097,
        label: 'Mar 28',
        changeOverTime: -0.010874111250522752,
      },
      {
        date: '2019-03-29',
        open: 166.39,
        high: 167.19,
        low: 164.81,
        close: 166.69,
        volume: 13455454,
        unadjustedVolume: 13455454,
        change: 1.14,
        changePercent: 0.689,
        vwap: 166.2698,
        label: 'Mar 29',
        changeOverTime: -0.004062854752942623,
      },
      {
        date: '2019-04-01',
        open: 167.83,
        high: 168.9,
        low: 167.2789,
        close: 168.7,
        volume: 10381490,
        unadjustedVolume: 10381490,
        change: 2.01,
        changePercent: 1.206,
        vwap: 168.2703,
        label: 'Apr 1',
        changeOverTime: 0.007946465913843485,
      },
      {
        date: '2019-04-02',
        open: 170.14,
        high: 174.9,
        low: 169.55,
        close: 174.2,
        volume: 23946529,
        unadjustedVolume: 23946529,
        change: 5.5,
        changePercent: 3.26,
        vwap: 173.2408,
        label: 'Apr 2',
        changeOverTime: 0.04080779112146731,
      },
      {
        date: '2019-04-03',
        open: 174.5,
        high: 177.96,
        low: 172.95,
        close: 173.54,
        volume: 27590058,
        unadjustedVolume: 27590058,
        change: -0.66,
        changePercent: -0.379,
        vwap: 175.1781,
        label: 'Apr 3',
        changeOverTime: 0.03686443209655247,
      },
      {
        date: '2019-04-04',
        open: 176.02,
        high: 178,
        low: 175.5301,
        close: 176.02,
        volume: 17847731,
        unadjustedVolume: 17847731,
        change: 2.48,
        changePercent: 1.429,
        vwap: 176.7923,
        label: 'Apr 4',
        changeOverTime: 0.05168190237199023,
      },
    ],
  },
];

const formattedMulti = [
  { name: 'Mar 4', FB: 167.37 },
  { name: 'Mar 5', FB: 171.26 },
  { name: 'Mar 6', FB: 172.51 },
  { name: 'Mar 7', FB: 169.13 },
  { name: 'Mar 8', FB: 169.6 },
  { name: 'Mar 11', FB: 172.07 },
  { name: 'Mar 12', FB: 171.92 },
  { name: 'Mar 13', FB: 173.37 },
  { name: 'Mar 14', FB: 170.17 },
  { name: 'Mar 15', FB: 165.98 },
  { name: 'Mar 18', FB: 160.47 },
  { name: 'Mar 19', FB: 161.57 },
  { name: 'Mar 20', FB: 165.44 },
  { name: 'Mar 21', FB: 166.08 },
  { name: 'Mar 22', FB: 164.34 },
  { name: 'Mar 25', FB: 166.29 },
  { name: 'Mar 26', FB: 167.68 },
  { name: 'Mar 27', FB: 165.87 },
  { name: 'Mar 28', FB: 165.55 },
  { name: 'Mar 29', FB: 166.69 },
  { name: 'Apr 1', FB: 168.7 },
  { name: 'Apr 2', FB: 174.2 },
  { name: 'Apr 3', FB: 173.54 },
  { name: 'Apr 4', FB: 176.02 },
];

test('returns correctly formatted single day data for graph', () => {
  expect(formatCurrentDayStocksForGraph(rawDay)).toEqual(formattedDay);
});

test('returns correctly formatted multi day data for graph', () => {
  expect(formatMultiDayStocksForGraph(rawMulti)).toEqual(formattedMulti);
});
